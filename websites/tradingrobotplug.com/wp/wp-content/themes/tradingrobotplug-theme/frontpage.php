<?php
/*
TradingRobotPlug Modern Homepage - Phase 1 Implementation
Description: Complete modern redesign with 7-section homepage structure
Author: Agent-1 (Integration) + Agent-2 (Design Architecture)
Version: 2.0.0
Updated: 2025-11-02
*/
get_header(); ?>

<!-- ===== HERO SECTION ===== -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="gradient-text">AUTOMATE YOUR TRADING WITH AI</h1>
            <p>Turn your trading strategy into a powerful robot that never sleeps. Backtesting, automation, and real-time market data - all in one platform.</p>

            <div class="cta-group">
                <a href="#pricing" class="btn btn-primary">Get Started Free</a>
                <a href="#demo" class="btn btn-secondary">Watch Demo</a>
            </div>

            <!-- Live Market Preview -->
            <div class="market-preview">
                <h4>üìà Live Market Data</h4>
                <div class="market-item">
                    <span class="market-symbol">SPY</span>
                    <span class="market-price">$450.23</span>
                    <span class="market-change positive">‚Üë +2.34%</span>
                </div>
                <div class="market-item">
                    <span class="market-symbol">QQQ</span>
                    <span class="market-price">$380.15</span>
                    <span class="market-change positive">‚Üë +1.87%</span>
                </div>
                <div class="market-item">
                    <span class="market-symbol">AAPL</span>
                    <span class="market-price">$185.92</span>
                    <span class="market-change negative">‚Üì -0.45%</span>
                </div>
                <p style="font-size: 12px; margin-top: 8px; opacity: 0.8;">Powered by Alpha Vantage | Updated live</p>
            </div>
        </div>
    </div>
</section>

<!-- ===== FEATURES SECTION ===== -->
<section class="section">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: 48px;">Why Choose Trading Robot Plug?</h2>

        <div class="features-grid">
            <div class="card feature-card">
                <div class="icon">‚ö°</div>
                <h3>Lightning Speed</h3>
                <p>Backtest strategies in seconds, not hours. Our optimized algorithms process market data at lightning speed.</p>
                <a href="#" class="btn btn-secondary">Learn More</a>
            </div>

            <div class="card feature-card">
                <div class="icon">ü§ñ</div>
                <h3>AI Automation</h3>
                <p>Set it and forget it. Your robot trades 24/7 while you focus on strategy and life.</p>
                <a href="#" class="btn btn-secondary">Learn More</a>
            </div>

            <div class="card feature-card">
                <div class="icon">üìä</div>
                <h3>Advanced Analytics</h3>
                <p>Real-time performance tracking, detailed analytics, and comprehensive reporting.</p>
                <a href="#" class="btn btn-secondary">Learn More</a>
            </div>
        </div>
    </div>
</section>

<!-- ===== HOW IT WORKS SECTION ===== -->
<section class="section section--light how-it-works">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: 48px;">How It Works</h2>
        <p style="text-align: center; margin-bottom: 64px; font-size: 18px; color: #666;">Three simple steps to automated trading success</p>

        <div class="steps-container">
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-icon">üéØ</div>
                <h3>Design Strategy</h3>
                <p>Define your trading rules and parameters using our intuitive interface.</p>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-icon">üìà</div>
                <h3>Backtest</h3>
                <p>Test your strategy against historical market data to validate performance.</p>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-icon">üöÄ</div>
                <h3>Deploy Robot</h3>
                <p>Launch your automated trading robot and start generating returns.</p>
            </div>
        </div>
    </div>
</section>

<!-- ===== SERVICES/BENEFITS SECTION ===== -->
<section class="section services-section">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: 48px;">Everything You Need to Succeed</h2>
        
        <div class="services-grid">
            <div class="services-image">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 64px; text-align: center; color: #ffffff;">
                    <div style="font-size: 120px; margin-bottom: 24px;">üìä</div>
                    <h3 style="color: #ffffff; margin: 0;">Professional Trading Dashboard</h3>
                </div>
            </div>
            
            <div class="services-list">
                <h3 style="margin-bottom: 32px;">Powerful Features</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 20px; font-size: 18px;">
                        <span style="color: #667eea; font-weight: bold; margin-right: 12px;">‚úì</span>
                        Real-time market data integration
                    </li>
                    <li style="margin-bottom: 20px; font-size: 18px;">
                        <span style="color: #667eea; font-weight: bold; margin-right: 12px;">‚úì</span>
                        Advanced backtesting engine
                    </li>
                    <li style="margin-bottom: 20px; font-size: 18px;">
                        <span style="color: #667eea; font-weight: bold; margin-right: 12px;">‚úì</span>
                        24/7 automated trading execution
                    </li>
                    <li style="margin-bottom: 20px; font-size: 18px;">
                        <span style="color: #667eea; font-weight: bold; margin-right: 12px;">‚úì</span>
                        Comprehensive performance analytics
                    </li>
                    <li style="margin-bottom: 20px; font-size: 18px;">
                        <span style="color: #667eea; font-weight: bold; margin-right: 12px;">‚úì</span>
                        Risk management tools
                    </li>
                    <li style="margin-bottom: 20px; font-size: 18px;">
                        <span style="color: #667eea; font-weight: bold; margin-right: 12px;">‚úì</span>
                        Multi-strategy portfolio management
                    </li>
                </ul>
                <a href="#pricing" class="btn btn-primary" style="margin-top: 32px;">Get Started Today</a>
            </div>
        </div>
    </div>
</section>

<!-- ===== TESTIMONIALS/SOCIAL PROOF SECTION ===== -->
<section class="section testimonials-section">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: 48px;">What Our Traders Say</h2>

        <div class="testimonials-grid">
            <div class="testimonial-card">
                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="testimonial-quote">"TradingRobotPlug has completely transformed my trading strategy. The backtesting feature saved me months of trial and error. Highly recommended!"</p>
                <div class="testimonial-author">
                    <strong>John D.</strong><br>
                    <span>Day Trader</span>
                </div>
            </div>

            <div class="testimonial-card">
                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="testimonial-quote">"Best automated trading platform I've ever used. The AI recommendations are spot-on and the analytics are incredibly detailed."</p>
                <div class="testimonial-author">
                    <strong>Sarah M.</strong><br>
                    <span>Quantitative Analyst</span>
                </div>
            </div>

            <div class="testimonial-card">
                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="testimonial-quote">"The automation features let me trade 24/7 without being glued to my screen. My performance has improved dramatically since switching to TradingRobotPlug."</p>
                <div class="testimonial-author">
                    <strong>Michael R.</strong><br>
                    <span>Swing Trader</span>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 64px;">
            <p style="color: #666; margin-bottom: 24px; font-size: 14px;">AS FEATURED IN:</p>
            <div style="display: flex; justify-content: center; gap: 48px; flex-wrap: wrap; opacity: 0.6;">
                <span style="font-size: 20px; font-weight: 600; color: #333;">TechCrunch</span>
                <span style="font-size: 20px; font-weight: 600; color: #333;">Forbes</span>
                <span style="font-size: 20px; font-weight: 600; color: #333;">Bloomberg</span>
            </div>
        </div>
    </div>
</section>

<!-- ===== PRICING SECTION ===== -->
<section class="section" id="pricing">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: 48px;">Choose Your Plan</h2>

        <div class="pricing-grid">
            <div class="pricing-card">
                <h3 class="pricing-name">Starter</h3>
                <div class="pricing-price">
                    <span class="currency">$</span>29<span class="period">/mo</span>
                </div>
                <ul class="pricing-features">
                    <li>‚Ä¢ 1 Trading Bot</li>
                    <li>‚Ä¢ Backtesting</li>
                    <li>‚Ä¢ Email Support</li>
                </ul>
                <a href="#" class="btn btn-primary">Start Free Trial</a>
            </div>

            <div class="pricing-card popular">
                <div class="pricing-badge">Most Popular</div>
                <h3 class="pricing-name">Pro</h3>
                <div class="pricing-price">
                    <span class="currency">$</span>99<span class="period">/mo</span>
                </div>
                <ul class="pricing-features">
                    <li>‚Ä¢ 5 Trading Bots</li>
                    <li>‚Ä¢ Advanced Backtesting</li>
                    <li>‚Ä¢ API Access</li>
                    <li>‚Ä¢ Priority Support</li>
                </ul>
                <a href="#" class="btn btn-primary">Start Free Trial</a>
            </div>

            <div class="pricing-card">
                <h3 class="pricing-name">Enterprise</h3>
                <div class="pricing-price">
                    Custom
                </div>
                <ul class="pricing-features">
                    <li>‚Ä¢ Unlimited Bots</li>
                    <li>‚Ä¢ Custom Strategies</li>
                    <li>‚Ä¢ White-label</li>
                    <li>‚Ä¢ Dedicated Support</li>
                </ul>
                <a href="#" class="btn btn-secondary">Contact Us</a>
            </div>
        </div>
    </div>
</section>

<!-- ===== ABOUT/COMPANY SECTION ===== -->
<section class="section section--gradient">
    <div class="container" style="text-align: center;">
        <h2 style="color: #ffffff; margin-bottom: 24px;">About TradingRobotPlug</h2>
        <p style="color: rgba(255, 255, 255, 0.9); font-size: 18px; max-width: 800px; margin: 0 auto 48px auto; line-height: 1.8;">
            We're a team of experienced traders and AI engineers on a mission to democratize algorithmic trading. 
            Our platform empowers traders of all levels to build, test, and deploy automated trading strategies 
            with confidence. Founded in 2024, we've helped thousands of traders achieve consistent results through 
            intelligent automation.
        </p>
        <div style="display: flex; justify-content: center; gap: 48px; flex-wrap: wrap; margin-top: 48px;">
            <div>
                <div style="font-size: 48px; font-weight: 700; color: #ffffff;">2,500+</div>
                <div style="color: rgba(255, 255, 255, 0.8);">Active Traders</div>
            </div>
            <div>
                <div style="font-size: 48px; font-weight: 700; color: #ffffff;">$5M+</div>
                <div style="color: rgba(255, 255, 255, 0.8);">Managed Volume</div>
            </div>
            <div>
                <div style="font-size: 48px; font-weight: 700; color: #ffffff;">99.9%</div>
                <div style="color: rgba(255, 255, 255, 0.8);">Uptime</div>
            </div>
        </div>
    </div>
</section>

<!-- ===== FINAL CTA/CONTACT SECTION ===== -->
<section class="section section--cta">
    <div class="container" style="text-align: center;">
        <h2 style="margin-bottom: 24px;">Ready to Automate Your Trading?</h2>
        <p style="font-size: 20px; margin-bottom: 48px; color: #666;">Join thousands of traders already using AI-powered automation</p>
        
        <div style="max-width: 600px; margin: 0 auto 48px auto;">
            <a href="#pricing" class="btn btn-primary" style="font-size: 24px; padding: 20px 48px; margin: 0 auto; display: inline-block;">Start Free Trial Today</a>
            <p style="font-size: 14px; margin-top: 16px; color: #999;">No credit card required ‚Ä¢ 14-day free trial ‚Ä¢ Cancel anytime</p>
        </div>

        <div style="margin-top: 64px; padding-top: 48px; border-top: 1px solid #e0e0e0;">
            <h3 style="margin-bottom: 24px;">Get in Touch</h3>
            <p style="color: #666; margin-bottom: 24px;">Questions? We're here to help!</p>
            
            <div style="display: flex; justify-content: center; gap: 32px; flex-wrap: wrap; margin-bottom: 32px;">
                <a href="mailto:support@tradingrobotplug.com" style="color: #667eea; text-decoration: none; font-size: 18px;">üìß support@tradingrobotplug.com</a>
                <a href="tel:+1234567890" style="color: #667eea; text-decoration: none; font-size: 18px;">üìû +1 (234) 567-890</a>
            </div>
            
            <div style="display: flex; justify-content: center; gap: 24px; margin-top: 32px;">
                <a href="#" style="display: inline-block; width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; text-decoration: none; font-size: 20px;">ùïè</a>
                <a href="#" style="display: inline-block; width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; text-decoration: none; font-size: 20px;">in</a>
                <a href="#" style="display: inline-block; width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; text-decoration: none; font-size: 20px;">‚ñ∂</a>
            </div>
        </div>
    </div>
</section>

<?php get_footer(); ?>
    add_theme_support('custom-background');
    add_theme_support('customize-selective-refresh-widgets');
    add_theme_support('html5', array(
        'search-form',
        'comment-form',
        'comment-list',
        'gallery',
        'caption',
    ));

    // Registering Menus with improved naming conventions
    register_nav_menus(array(
        'primary_menu' => __('Primary Menu', 'trading-robot-plug'),
        'footer_menu' => __('Footer Menu', 'trading-robot-plug'),
    ));
}

add_action('after_setup_theme', 'trading_robot_plug_setup');

// Enqueue theme styles and scripts with AI integration and data visualization
function trading_robot_plug_scripts() {
    // Enqueue the main stylesheet
    wp_enqueue_style('trading-robot-plug-style', get_stylesheet_uri(), array(), wp_get_theme()->get('Version'));

    // Enqueue Chart.js for data visualization
    wp_enqueue_script('trading-robot-plug-chartjs', 'https://cdn.jsdelivr.net/npm/chart.js', array(), null, true);

    // Enqueue the custom JavaScript file for handling charts and AI integration
    wp_enqueue_script('trading-robot-plug-custom-js', get_template_directory_uri() . '/assets/js/main.js', array('jquery'), wp_get_theme()->get('Version'), true);

    // Enqueue Google Fonts
    wp_enqueue_style('trading-robot-plug-fonts', 'https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap', false);
}

add_action('wp_enqueue_scripts', 'trading_robot_plug_scripts');

// Enhanced REST API: Fetch AI-driven Trading Signals
function fetch_trading_signals() {
    $command = escapeshellcmd('python3 ' . get_template_directory() . '/scripts/fetch_trading_signals.py');
    $output = shell_exec($command);

    // Improved error handling with a clearer error log message
    if ($output === null) {
        error_log('TradingRobotPlug Error: Failed to execute trading signals script.');
        return new WP_Error('trading_signals_error', 'Failed to execute trading signals script.', array('status' => 500));
    }

    // Parse the JSON output from the script
    $data = json_decode($output, true);
    if (json_last_error() !== JSON_ERROR_NONE) {
        error_log('TradingRobotPlug Error: Invalid JSON response from trading signals script.');
        return new WP_Error('trading_signals_error', 'Invalid response from trading signals script.', array('status' => 500));
    }

    return $data;
}

add_action('rest_api_init', function () {
    register_rest_route('tradingrobotplug/v1', '/fetchsignals', array(
        'methods' => 'GET',
        'callback' => 'fetch_trading_signals',
        'permission_callback' => '__return_true',
    ));
});

// Additional REST API routes for fetching and visualizing data

// REST API: Fetch Alpha Vantage Data and Generate Visualization
function fetch_alpha_vantage_data() {
    $command = escapeshellcmd('python3 ' . get_template_directory() . '/scripts/alpha_vantage_fetcher.py');
    $output = shell_exec($command);

    if ($output === null) {
        error_log('TradingRobotPlug Error: Failed to execute Alpha Vantage script.');
        return new WP_Error('alpha_vantage_fetch_error', 'Failed to execute Alpha Vantage script.', array('status' => 500));
    }

    $data = json_decode($output, true);
    if (json_last_error() !== JSON_ERROR_NONE) {
        error_log('TradingRobotPlug Error: Invalid JSON response from Alpha Vantage script.');
        return new WP_Error('alpha_vantage_fetch_error', 'Invalid response from Alpha Vantage script.', array('status' => 500));
    }

    return $data;
}

add_action('rest_api_init', function () {
    register_rest_route('tradingrobotplug/v1', '/fetchalphadata', array(
        'methods' => 'GET',
        'callback' => 'fetch_alpha_vantage_data',
        'permission_callback' => '__return_true',
    ));
});

// REST API: Fetch Polygon Data and Generate Visualization
function fetch_polygon_data() {
    $command = escapeshellcmd('python3 ' . get_template_directory() . '/scripts/polygon_fetcher.py');
    $output = shell_exec($command);

    if ($output === null) {
        error_log('TradingRobotPlug Error: Failed to execute Polygon script.');
        return new WP_Error('polygon_fetch_error', 'Failed to execute Polygon script.', array('status' => 500));
    }

    $data = json_decode($output, true);
    if (json_last_error() !== JSON_ERROR_NONE) {
        error_log('TradingRobotPlug Error: Invalid JSON response from Polygon script.');
        return new WP_Error('polygon_fetch_error', 'Invalid response from Polygon script.', array('status' => 500));
    }

    return $data;
}

add_action('rest_api_init', function () {
    register_rest_route('tradingrobotplug/v1', '/fetchpolygondata', array(
        'methods' => 'GET',
        'callback' => 'fetch_polygon_data',
        'permission_callback' => '__return_true',
    ));
});

// REST API: Fetch Real-Time Data and Generate Visualization
function fetch_real_time_data() {
    $command = escapeshellcmd('python3 ' . get_template_directory() . '/scripts/real_time_fetcher.py');
    $output = shell_exec($command);

    if ($output === null) {
        error_log('TradingRobotPlug Error: Failed to execute Real-Time Data script.');
        return new WP_Error('realtime_fetch_error', 'Failed to execute Real-Time Data script.', array('status' => 500));
    }

    $data = json_decode($output, true);
    if (json_last_error() !== JSON_ERROR_NONE) {
        error_log('TradingRobotPlug Error: Invalid JSON response from Real-Time Data script.');
        return new WP_Error('realtime_fetch_error', 'Invalid response from Real-Time Data script.', array('status' => 500));
    }

    return $data;
}

add_action('rest_api_init', function () {
    register_rest_route('tradingrobotplug/v1', '/fetchrealtime', array(
        'methods' => 'GET',
        'callback' => 'fetch_real_time_data',
        'permission_callback' => '__return_true',
    ));
});
?>
